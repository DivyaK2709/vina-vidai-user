<ion-content class="ion-padding">
  <div class="signup-container">
    <div class="header">
      <h1 class="logo">QUIZER</h1>
    </div>

    <div class="signup-card">
      <h2 class="title">Welcome To Quizer</h2>
      <p class="subtitle">Create an account to continue</p>

      <form (ngSubmit)="onSubmit()" #signupForm="ngForm">

        <!-- Username -->
        <ion-item lines="none" class="input-item">
          <ion-label position="floating">Username</ion-label>
          <ion-input
            type="text"
            [(ngModel)]="username"
            name="username"
            required
            (ionInput)="updateIcon('username')">
          </ion-input>
          <ion-icon
            name="person-outline"
            slot="end"
            [style.color]="icons.username && isUsernameValid() ? 'green' : '#888'">
          </ion-icon>
        </ion-item>
        <p *ngIf="username && !isUsernameValid()" class="error-msg">
          Username must contain only alphabets
        </p>

        <!-- Email -->
        <ion-item lines="none" class="input-item">
          <ion-label position="floating">Email</ion-label>
          <ion-input
            type="email"
            [(ngModel)]="email"
            name="email"
            required
            (ionInput)="updateIcon('email')">
          </ion-input>
          <ion-icon
            name="mail-outline"
            slot="end"
            [style.color]="icons.email && isEmailValid() ? 'green' : '#888'">
          </ion-icon>
        </ion-item>
        <p *ngIf="email && !isEmailValid()" class="error-msg">
          Please enter a valid email address
        </p>

        <!-- Password -->
        <ion-item lines="none" class="input-item">
          <ion-label position="floating">Password</ion-label>
          <ion-input
            type="password"
            [(ngModel)]="password"
            name="password"
            required
            minlength="6"
            (ionInput)="updateIcon('password')">
          </ion-input>
          <ion-icon
            name="lock-closed-outline"
            slot="end"
            [style.color]="icons.password && isPasswordValid() ? 'green' : '#888'">
          </ion-icon>
        </ion-item>
        <p *ngIf="password && !isPasswordValid()" class="error-msg">
          Password must be at least 6 characters
        </p>

        <!-- Confirm Password -->
        <ion-item lines="none" class="input-item">
          <ion-label position="floating">Confirm Password</ion-label>
          <ion-input
            type="password"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            required
            (ionInput)="updateIcon('confirmPassword')">
          </ion-input>
          <ion-icon
            name="lock-closed-outline"
            slot="end"
            [style.color]="icons.confirmPassword && isConfirmPasswordValid() ? 'green' : '#888'">
          </ion-icon>
        </ion-item>
        <p *ngIf="confirmPassword && !isConfirmPasswordValid()" class="error-msg">
          Passwords do not match
        </p>

        <!-- Register Button -->
        <div class="signup-button-wrapper">
          <ion-button type="submit" class="signup-button" 
            [disabled]="!signupForm.valid || !isFormValid()">
            Register
          </ion-button>
        </div>
      </form>

      <!-- Signin Redirect -->
      <div class="signin-link">
        <ion-text color="medium">Already a User?</ion-text>
        <span class="signin-text" (click)="goToSignin()"> Sign In</span>
      </div>
    </div>
  </div>
</ion-content>
