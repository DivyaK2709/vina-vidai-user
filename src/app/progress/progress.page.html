<ion-header>
  <ion-toolbar color="light">
    <ion-title>Progress</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="progress-page">
  <div class="summary">
    <div class="summary-left">
      <h3>Total Points</h3>
      <div class="points">{{ totalPoints }}</div>
      <div class="small">Last: {{ lastUpdated }}</div>
    </div>

    <div class="summary-right">
      <ion-segment [(ngModel)]="segment" (ionChange)="setSegment(segment)">
        <ion-segment-button value="daily">Daily</ion-segment-button>
        <ion-segment-button value="weekly">Weekly</ion-segment-button>
        <ion-segment-button value="subjects">Subjects</ion-segment-button>
      </ion-segment>
    </div>
  </div>

  <div class="charts">
    <!-- DAILY (bar) -->
    <div *ngIf="segment === 'daily'" class="chart-container">
      <h4>Daily Progress</h4>
      <canvas baseChart
        [data]="dailyChartData"
        [type]="'bar'"
        [options]="dailyOptions">
      </canvas>
    </div>

    <!-- WEEKLY (line/area) -->
    <div *ngIf="segment === 'weekly'" class="chart-container">
      <h4>Weekly Progress</h4>
      <canvas baseChart
        [data]="weeklyChartData"
        [type]="'line'"
        [options]="weeklyOptions">
      </canvas>
    </div>

    <!-- SUBJECTS (pie) -->
    <div *ngIf="segment === 'subjects'" class="chart-container">
      <h4>Subjects</h4>
      <canvas baseChart
        [data]="subjectChartData"
        [type]="'pie'"
        [options]="subjectOptions">
      </canvas>
    </div>
  </div>
</ion-content>
